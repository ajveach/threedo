
;!function(){var t=function(){this.utility={},this.version="0.0.1";var t=function(){var t=$("#threedo,[data-threedoType='container']");t.each(function(){var t=$(this),e=t.attr("data-threedoName");if(!e&&i.primary)throw"A name was not provided for the threedo container";e&&(i[e]=t),i.primary||(i.primary=t),t.attr("data-threedoType","container")})},i={};Object.defineProperty(this,"$container",{get:function(){return i.primary||t(),i.primary}}),Object.defineProperty(this,"$containers",{get:function(){return i.primary||t(),i}}),this.init=function(t,i){var e=this;this.initialized||this.package(function(){e.scene=new e.Scene(t),"function"==typeof i&&i()})},this.initialized=!1};window.threedo=new t}();
;!function(){var e=function(e){"function"==typeof e&&(r=e),i(),threedo.package.loadOrder=n,threedo.package.instance(function(){threedo.initialized=!0,"function"==typeof r&&r()})},n=[],t=null,i=function(){t=threedo.extend.list;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(threedo[n.name])throw'Modules cannot use the names of core threedo properties. You cannot add a module named "'+n.name+'".';if("object"==typeof n.requirements&&"object"==typeof n.requirements.modules&&n.requirements.modules){var i=n.requirements.modules;for(var r in i)if(i.hasOwnProperty(r)){if(!t[i[r]])throw'The module "'+n.name+'" requires the module "'+i[r]+'", but it was not included in this build.';o(n.name,i[r])}}else if("object"==typeof n.requirements&&"string"==typeof n.requirements.modules){var u=n.requirements.modules;if(!t[u])throw'The module "'+n.name+'" requires the module "'+u+'", but it was not included in this build.';o(n.name,u)}else o(n.name)}},o=function(e,t){var i=n.indexOf(e);if(t){var o=n.indexOf(t);0>o&&(o=n.push(t)-1),n.push(0>i?e:n.splice(i,1))}else 0>i&&n.push(e)};e.instance=function(e){for(var i in n)if(n.hasOwnProperty(i)&&!t[n[i]].initialized)return t[n[i]].initialized=!0,void(threedo[n[i]]=new t[n[i]].Module(t[n[i]],function(){threedo.package.instance(e)}));e()};var r=null;threedo.package=e}();
;!function(){var e=[],n=function(n){if("function"==typeof n){var t=e.push(n);return t}threedo.scene.width($(window).width()),threedo.scene.height($(window).height());for(var t=0;t<e.length;t+=1)e[t]()};threedo.onResize=n}();
;!function(){var e={},t=(new Date).getTime(),d=function(){var d=(new Date).getTime();threedo.update.delta=(d-t)/1e3,threedo.update.time=Math.round(1e3*(threedo.update.time+threedo.update.delta))/1e3,t=d;for(var a in e)e.hasOwnProperty(a)&&"function"==typeof e[a]&&e[a]()};d.add=function(t,d){e[t]=d},d.remove=function(t){delete e[t]},d.deltaTime=0,d.time=0,threedo.update=d}();
;!function(){var e,n=function(n){n?(e?e.$e.show():e=threedo.UI.text({text:"Loading...","class":"threedo-UI-Loading",name:"loading"}),e.$e.children("span").css("line-height",threedo.scene.$container.height()+"px")):e.$e.hide()};threedo.loading=n}();
;!function(){threedo.Model=function(){},threedo.Model.prototype={constructor:threedo.Model,extend:function(e,o){Object.defineProperty(this,e,o)}}}();
;!function(){threedo.Module=function(e){threedo.Model.call(this);var t=name;Object.defineProperty(this,"name",{get:function(){return t},set:function(e){t=e}}),this.name=e.name;var r=[];if(Object.defineProperty(this,"requirement",{set:function(e){if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&r.indexOf(e[t])<0&&r.push(e);else r.indexOf(e)<0&&r.push(e)}}),Object.defineProperty(this,"requirements",{get:function(){return r}}),"object"==typeof e.requirements)for(var n in e.requirements)e.requirements.hasOwnProperty(n)&&(this.requirement=e.requirements[n]);else"string"==typeof e.requirements&&(this.requirement=e.requirements)},threedo.Module.prototype=Object.create(threedo.Model.prototype),threedo.Module.prototype.constructor=threedo.Module}();
;!function(){var e=function(e){if(this.extend.list[e.name])throw'A module named "'+e.name+'" already exists in threedo.';this.extend.list[e.name]=e};e.list={},threedo.extend=e}();
;!function(){threedo.Renderer=function(e){var e=e||{};threedo.Model.call(this,e);var t=e.renderType||"WebGLRenderer";Object.defineProperty(this,"renderType",{get:function(){return t}});var r=e.$container||threedo.$container;Object.defineProperty(this,"$container",{get:function(){return r},set:function(e){r=e}});var n=e.scene||threedo.scene;Object.defineProperty(this,"scene",{get:function(){return n},set:function(e){n=e}});var o=e.camera||threedo.scene.find("mainCamera");Object.defineProperty(this,"camera",{get:function(){return o},set:function(e){o=e}});var i=e.width||r.width();Object.defineProperty(this,"width",{get:function(){return i},set:function(e){i=e,o.aspectRatio=i/c,h.setSize(i,c)}});var c=e.height||r.height();Object.defineProperty(this,"height",{get:function(){return c},set:function(e){c=e,o.aspectRatio=i/c,h.setSize(i,c)}});var a=e.backgroundColor||new THREE.Color(.2,0,.2);Object.defineProperty(this,"backgroundColor",{get:function(){return a},set:function(e){a=e,h.setClearColor(a,d)}});var d=e.backgroundAlpha||1;Object.defineProperty(this,"backgroundAlpha",{get:function(){return d},set:function(e){d=e,h.setClearColor(a,d)}}),this.render=function(){h.render(n.scene,o.Camera)},this.updateDimensions=function(){var e=r.width(),t=r.height();e!==i&&(this.width=e),e!==c&&(this.height=t)};var h=new THREE[t];o.aspectRatio=i/c,h.setSize(i,c),h.setClearColor(a,d),r.html(h.domElement),this.type="Renderer"},threedo.Renderer.prototype=Object.create(threedo.Model.prototype),threedo.Renderer.constructor=threedo.Renderer}();
;!function(){threedo.Scene=function(e,t){if(threedo.Model.call(this),!e.name)throw"A valid name was not provided to create this scene";var n=e.name;Object.defineProperty(this,"name",{get:function(){return n},set:function(e){n=e}});var r=45;Object.defineProperty(this,"viewAngle",{get:function(){return r},set:function(e){r=e}});var i=.1;Object.defineProperty(this,"near",{get:function(){return i},set:function(e){i=e}});var a=1e3;Object.defineProperty(this,"far",{get:function(){return a},set:function(e){a=e}});var o={};Object.defineProperty(this,"renderer",{get:function(){return o},set:function(e){o=e}});var d=new THREE.Scene;Object.defineProperty(this,"scene",{get:function(){return d},set:function(e){d=e}});var s;Object.defineProperty(this,"backgroundColor",{get:function(){return s},set:function(e){s=e}});var c;Object.defineProperty(this,"backgroundAlpha",{get:function(){return c},set:function(e){c=e}});var u={};Object.defineProperty(this,"skybox",{get:function(){return u},set:function(e){u.materials=[];for(var t=0;t<e.length;++t)u.materials.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(e[t]),side:THREE.BackSide}));u.mesh||(u.mesh=new THREE.Mesh(new THREE.BoxGeometry(a,a,a),new THREE.MeshFaceMaterial(u.materials)),d.add(u.mesh))}});var f=e.$container||threedo.$container;Object.defineProperty(this,"$container",{get:function(){return f},set:function(e){f=e}});var h={};Object.defineProperty(this,"nodes",{get:function(){return h}}),this.add=function(e){if(!h[e.name]){h[e.name]=e;var t=e.Camera||e.Mesh||e.Object3D||e.Light||null;return t&&d.add(t),e}throw'A node already exists in this scene named "'+e.name+'"'},this.find=function(e){return h[e]||null};var p={},m={};this.update=function(){for(var e in p)p.hasOwnProperty(e)&&p[e].active&&p[e].update()},this.update.add=function(e){if(p[e.name])throw'A node named "'+e.name+"\" already exists in this scene's update queue";p[e.name]=e},this.update.remove=function(e){"string"==typeof e&&p[e]?delete p[e]:e instanceof threedo.Node&&p[e.name]&&delete p[e.name]},this.fixedUpdate=function(){o.updateDimensions();for(var e in m)m.hasOwnProperty(e)&&m[e].active&&m[e].fixedUpdate();v=threedo.update.time},this.fixedUpdate.add=function(e){if(m[e.name])throw'A node named "'+e.name+"\" already exists in this scene's update queue";m[e.name]=e},this.fixedUpdate.remove=function(e){"string"==typeof e&&m[e]?delete m[e]:e instanceof threedo.Node&&m[e.name]&&delete m[e.name]};var l=.1,v=-l,y=function(){if(requestAnimationFrame(y),stats.begin(),threedo.update(),threedo.scene){threedo.scene.update();var e=threedo.update.time-v>=l?!0:!1;e&&threedo.scene.fixedUpdate()}o.render(),stats.end()};this.type="Scene";var g=new threedo.Camera({name:"mainCamera",near:i,far:a,scene:this});return o=new threedo.Renderer({camera:g,scene:this}),y(),"function"==typeof t?t():void 0},threedo.Scene.prototype=Object.create(threedo.Model.prototype),threedo.Scene.prototype.constructor=threedo.Scene}();
;!function(){threedo.Node=function(e){if(threedo.Model.call(this),!e)throw"A valid name was not provided to create this node";this.type="Node";var t=e;Object.defineProperty(this,"name",{get:function(){return t},set:function(e){t=e}});var o=!0;Object.defineProperty(this,"active",{get:function(){return o},set:function(e){o=e}});var n=null;Object.defineProperty(this,"update",{get:function(){return n},set:function(e){if(e){if("function"!=typeof e)throw'The value provided for this node\'s "update" method must be a function';n=e,threedo.scene.update.add(this)}else threedo.scene.update.remove(this),n=null}});var d=null;Object.defineProperty(this,"fixedUpdate",{get:function(){return d},set:function(e){if(e){if("function"!=typeof e)throw'The value provided for this node\'s "fixedUpdate" method must be a function';d=e,threedo.scene.fixedUpdate.add(this)}else threedo.scene.fixedUpdate.remove(this),d=null}})},threedo.Node.prototype=Object.create(threedo.Model.prototype),threedo.Node.prototype.constructor=threedo.Node}();
;!function(){threedo.UI=function(t){var t=t||{};threedo.Node.call(this,t.name);var e=!1;Object.defineProperty(this,"persist",{get:function(){return e},set:function(t){if("boolean"!=typeof t)throw"This UI object's persist property must be of type boolean";e=t}}),this.persist=t.persist||!1;var o="global";Object.defineProperty(this,"context",{get:function(){return o},set:function(t){o=t&&"global"!==t?t:"global"}}),this.context=t.context||"global";var r=$("<div />").addClass("threedo-UI").attr("data-name",this.name);Object.defineProperty(this,"$",{get:function(){return r}});var n="";Object.defineProperty(this,"class",{get:function(){return n},set:function(t){n=t,this.$.removeClass().addClass("threedo-UI "+(this.typeSpecificClass?this.typeSpecificClass:"")+" "+n)}}),this.class=t.class||"";var i={top:0,right:null,bottom:null,left:0};Object.defineProperty(this,"position",{get:function(){return i},set:function(t){if("object"!=typeof t)throw"This UI object must be provided a position as an array or object";"[object Array]"===Object.prototype.toString.call(t)?(i.top="number"==typeof t[0]?t[0]:null,i.right="number"==typeof t[1]?t[1]:null,i.bottom="number"==typeof t[2]?t[2]:null,i.left="number"==typeof t[3]?t[3]:null):(i.top="number"==typeof t.top?t.top:null,i.right="number"==typeof t.right?t.right:null,i.bottom="number"==typeof t.bottom?t.bottom:null,i.left="number"==typeof t.left?t.left:null),null===i.top&&null===i.bottom&&(i.top=0),null===i.left&&null===i.right&&(i.left=0),this.position.refresh()}}),this.position.refresh=function(){"number"==typeof i.left?r.css("left",i.left):"number"==typeof i.right&&r.css("left",threedo.scene.renderer.width-i.right),"number"==typeof i.top?r.css("top",i.top):"number"==typeof i.bottom&&r.css("top",threedo.scene.renderer.height-i.bottom)},this.position=t.position||[],threedo.scene.add(this),this.type="UI"},threedo.UI.prototype=Object.create(threedo.Node.prototype),threedo.UI.prototype.constructor=threedo.UI}();
;!function(){threedo.Node3D=function(t){if(threedo.Node.call(this,t.name),!t.noObject3D){var e;Object.defineProperty(this,"Object3D",{get:function(){return e},set:function(t){e=t}})}Object.defineProperty(this,"position",{get:function(){return e?e.position:this.Mesh?this.Mesh.position:this.Camera?this.Camera.position:void 0},set:function(t){e?e.position.set(t.x,t.y,t.z):this.Mesh?this.Mesh.position.set(t.x,t.y,t.z):this.Camera&&this.Camera.position.set(t.x,t.y,t.z)}}),this.type="Node3D"},threedo.Node3D.prototype=Object.create(threedo.Node.prototype),threedo.Node3D.constructor=threedo.Node3D}();
;!function(){threedo.Camera=function(e){var e=e||{};e.name=e.name||"mainCamera",e.noObject3D=!0,threedo.Node3D.call(this,e);var t=e.aspectRatio;Object.defineProperty(this,"aspectRatio",{get:function(){return t},set:function(e){t=e,r&&(r.aspect=t,r.updateProjectionMatrix())}});var r=new THREE.PerspectiveCamera(e.viewAngle||45,e.aspectRatio||4/3,e.near||threedo.scene.near,e.far||threedo.scene.far);Object.defineProperty(this,"Camera",{get:function(){return r}}),e.scene?e.scene.add(this):threedo.scene.add(this);var a=e.position||new THREE.Vector3(0,0,0);r.position.set(a.x,a.y,a.z),this.type="Camera"},threedo.Camera.prototype=Object.create(threedo.Node3D.prototype),threedo.Camera.constructor=threedo.Camera}();
;!function(){threedo.Light=function(t){var t=t||{};t.noObject3D=!0,threedo.Node3D.call(this,t);var e=t.color||16777215,o=new THREE.PointLight(e);Object.defineProperty(this,"Light",{get:function(){return o}});var i=t.position||[0,0,0];o.position.x=i[0],o.position.y=i[1],o.position.z=i[2],threedo.scene.add(this),this.type="Light"},threedo.Light.prototype=Object.create(threedo.Node3D.prototype),threedo.Light.constructor=threedo.Light}();
;!function(){threedo.Mesh=function(t){var t=t||{};t.noObject3D=!0,threedo.Node3D.call(this,t);var e=null;Object.defineProperty(this,"Mesh",{get:function(){return e},set:function(t){e instanceof THREE.Mesh&&threedo.scene.remove(e),e=t,threedo.scene.add(this)}}),t.Mesh instanceof THREE.Mesh&&(this.Mesh=t.Mesh),t.rotation instanceof THREE.Euler&&(this.Mesh.rotation.x=t.rotation.x,this.Mesh.rotation.y=t.rotation.y,this.Mesh.rotation.z=t.rotation.z),t.position instanceof THREE.Vector3&&(this.Mesh.position.x=t.position.x,this.Mesh.position.y=t.position.y,this.Mesh.position.z=t.position.z),this.type="Mesh"},threedo.Mesh.prototype=Object.create(threedo.Node3D.prototype),threedo.Mesh.constructor=threedo.Mesh}();
;!function(){threedo.Cube=function(e){var e=e||{},t=e.scale||new THREE.Vector3(1,1,1),o=e.segments||[1,1,1],r=new THREE.BoxGeometry(t.x,t.y,t.z,o[0],o[1],o[2]),h=e.color||16777215,c=e.material||null;c||(c=new THREE.MeshLambertMaterial({color:h})),e.Mesh=new THREE.Mesh(r,c),threedo.Mesh.call(this,e),this.type="Cube"},threedo.Cube.prototype=Object.create(threedo.Mesh.prototype),threedo.Cube.constructor=threedo.Cube}();
;!function(){threedo.Sphere=function(e){var e=e||{},t=e.radius||1,r=e.segments||[8,6],h=e.phi||[0,2*Math.PI],o=e.theta||[0,Math.PI],a=new THREE.SphereGeometry(t,r[0],r[1],h[0],h[1],o[0],o[1]),p=e.color||16777215,s=e.material||null;s||(s=new THREE.MeshLambertMaterial({color:p})),e.Mesh=new THREE.Mesh(a,s),threedo.Mesh.call(this,e),this.type="Sphere"},threedo.Sphere.prototype=Object.create(threedo.Mesh.prototype),threedo.Sphere.constructor=threedo.Sphere}();
;!function(){threedo.UI.text=function(t){if(this.typeSpecificClass="threedo-UI-text",threedo.UI.call(this,t),!t.text)throw"A text UI object cannot be created without providing a text value";var e=null;Object.defineProperty(this,"text",{get:function(){return e},set:function(t){e=t,this.$.html("<span>"+e+"</span>")}}),this.text=t.text,this.$.prependTo("global"===this.context?threedo.scene.renderer.$container:this.context),this.type="UI.text"},threedo.UI.text.prototype=Object.create(threedo.UI.prototype),threedo.UI.text.prototype.constructor=threedo.UI.text}();
;!function(){threedo.UI.select=function(e){var t=this;this.typeSpecificClass="threedo-UI-select",threedo.UI.call(this,e),this.$.hover(function(){t.$.addClass("hover")},function(){t.collapse(),t.$.removeClass("hover")});var n=$("<div />").addClass("options").appendTo(this.$);this.expand=function(){t.$.children(".options").show()},this.collapse=function(){t.$.children(".options").hide()},this.toggle=function(){t.expanded()?t.collapse():t.expand()},this.expanded=function(){return t.$.children(".options").is(":visible")};var o;if(Object.defineProperty(this,"value",{get:function(){return o},set:function(e){if(e!==o){var t;o=e;for(var n in a)a.hasOwnProperty(n)&&"object"==typeof a[n]&&(a[n].$.removeClass("selected"),a[n].selected=!1,a[n].value==o&&(a[n].selected=!0,a[n].$.addClass("selected"),t=a[n]));this.label=t.name,this.collapse(),"function"==typeof this.onChange&&this.onChange(o)}}}),this.on=function(e,n){"change"==e?this.onChange=n:t.$.on(e,n)},this.onChange=null,!e.label)throw"A label is required to create a UI.select object";var i=null,s=null;Object.defineProperty(this,"label",{get:function(){return i},set:function(e){i=e,this.refreshLabel()}}),this.refreshLabel=function(){s?s.children("span").html(t.label):(s=$("<div />").addClass("label").prependTo(t.$),$("<span />").html(t.label).appendTo(s),$("<div />").addClass("arrow-down").prependTo(s),s.on("click",t.toggle))},this.label=e.label;var a=[];if(Object.defineProperty(this,"options",{get:function(){return a}}),this.options.add=function(e){var e=e;if("string"==typeof e)var e={name:e,value:e};e.index=a.length,e.$=$("<div />").html(e.name).attr("data-value",e.value).attr("data-index",e.index).addClass("option").appendTo(n).on("click",function(){t.value=t.options[e.index].value}),a.push(e)},this.options.remove=function(e){return n.children('[data-index="'+e+'"]').remove(),delete a[e],this.options},this.options.clear=function(){return a=[],n.children(".option").remove(),this.options},e.options)for(var r in e.options)e.options.hasOwnProperty(r)&&this.options.add(e.options[r]);this.$.prependTo("global"===this.context?threedo.scene.renderer.$container:this.context),this.type="UI.select"},threedo.UI.select.prototype=Object.create(threedo.UI.prototype),threedo.UI.select.prototype.constructor=threedo.UI.select}();
;
//# sourceMappingURL=threedo.min.js.map