!function(){var a=function(){this.utility={},this.version="0.0.1";var a=function(){var a=$("#threedo,[data-threedoType='container']");a.each(function(){var a=$(this),c=a.attr("data-threedoName");if(!c&&b.primary)throw"A name was not provided for the threedo container";c&&(b[c]=a),b.primary||(b.primary=a),a.attr("data-threedoType","container")})},b={};Object.defineProperty(this,"$container",{get:function(){return b.primary||a(),b.primary}}),Object.defineProperty(this,"$containers",{get:function(){return b.primary||a(),b}}),this.init=function(a,b){var c=this;this.initialized||this["package"](function(){c.scene=new c.Scene(a),"function"==typeof b&&b()})},this.initialized=!1};window.threedo=new a}(),function(){var a=function(a){"function"==typeof a&&(f=a),d(),threedo["package"].loadOrder=b,threedo["package"].instance(function(){threedo.initialized=!0,"function"==typeof f&&f()})},b=[],c=null,d=function(){c=threedo.extend.list;for(var a in c)if(c.hasOwnProperty(a)){var b=c[a];if(threedo[b.name])throw'Modules cannot use the names of core threedo properties. You cannot add a module named "'+b.name+'".';if("object"==typeof b.requirements&&"object"==typeof b.requirements.modules&&b.requirements.modules){var d=b.requirements.modules;for(var f in d)if(d.hasOwnProperty(f)){if(!c[d[f]])throw'The module "'+b.name+'" requires the module "'+d[f]+'", but it was not included in this build.';e(b.name,d[f])}}else if("object"==typeof b.requirements&&"string"==typeof b.requirements.modules){var g=b.requirements.modules;if(!c[g])throw'The module "'+b.name+'" requires the module "'+g+'", but it was not included in this build.';e(b.name,g)}else e(b.name)}},e=function(a,c){var d=b.indexOf(a);if(c){var e=b.indexOf(c);0>e&&(e=b.push(c)-1),b.push(0>d?a:b.splice(d,1))}else 0>d&&b.push(a)};a.instance=function(a){for(var d in b)if(b.hasOwnProperty(d)&&!c[b[d]].initialized)return c[b[d]].initialized=!0,void(threedo[b[d]]=new c[b[d]].Module(c[b[d]],function(){threedo["package"].instance(a)}));a()};var f=null;threedo["package"]=a}(),function(){var a=[],b=function(b){if("function"==typeof b){var c=a.push(b);return c}threedo.scene.width($(window).width()),threedo.scene.height($(window).height());for(var c=0;c<a.length;c+=1)a[c]()};threedo.onResize=b}(),function(){var a={},b=(new Date).getTime(),c=function(){var c=(new Date).getTime();threedo.update.delta=(c-b)/1e3,threedo.update.time=Math.round(1e3*(threedo.update.time+threedo.update.delta))/1e3,b=c;for(var d in a)a.hasOwnProperty(d)&&"function"==typeof a[d]&&a[d]()};c.add=function(b,c){a[b]=c},c.remove=function(b){delete a[b]},c.deltaTime=0,c.time=0,threedo.update=c}(),function(){var a,b=function(b){b?(a?a.$e.show():a=threedo.UI.text({text:"Loading...","class":"threedo-UI-Loading",name:"loading"}),a.$e.children("span").css("line-height",threedo.scene.$container.height()+"px")):a.$e.hide()};threedo.loading=b}(),function(){threedo.Model=function(){},threedo.Model.prototype={constructor:threedo.Model,extend:function(a,b){Object.defineProperty(this,a,b)}}}(),function(){threedo.Module=function(a){threedo.Model.call(this);var b=name;Object.defineProperty(this,"name",{get:function(){return b},set:function(a){b=a}}),this.name=a.name;var c=[];if(Object.defineProperty(this,"requirement",{set:function(a){if("object"==typeof a)for(var b in a)a.hasOwnProperty(b)&&c.indexOf(a[b])<0&&c.push(a);else c.indexOf(a)<0&&c.push(a)}}),Object.defineProperty(this,"requirements",{get:function(){return c}}),"object"==typeof a.requirements)for(var d in a.requirements)a.requirements.hasOwnProperty(d)&&(this.requirement=a.requirements[d]);else"string"==typeof a.requirements&&(this.requirement=a.requirements)},threedo.Module.prototype=Object.create(threedo.Model.prototype),threedo.Module.prototype.constructor=threedo.Module}(),function(){var a=function(a){if(this.extend.list[a.name])throw'A module named "'+a.name+'" already exists in threedo.';this.extend.list[a.name]=a};a.list={},threedo.extend=a}(),function(){threedo.Renderer=function(a){var a=a||{};threedo.Model.call(this,a);var b=a.renderType||"WebGLRenderer";Object.defineProperty(this,"renderType",{get:function(){return b}});var c=a.$container||threedo.$container;Object.defineProperty(this,"$container",{get:function(){return c},set:function(a){c=a}});var d=a.scene||threedo.scene;Object.defineProperty(this,"scene",{get:function(){return d},set:function(a){d=a}});var e=a.camera||threedo.scene.find("mainCamera");Object.defineProperty(this,"camera",{get:function(){return e},set:function(a){e=a}});var f=a.width||c.width();Object.defineProperty(this,"width",{get:function(){return f},set:function(a){f=a,e.aspectRatio=f/g,j.setSize(f,g)}});var g=a.height||c.height();Object.defineProperty(this,"height",{get:function(){return g},set:function(a){g=a,e.aspectRatio=f/g,j.setSize(f,g)}});var h=a.backgroundColor||new THREE.Color(.2,0,.2);Object.defineProperty(this,"backgroundColor",{get:function(){return h},set:function(a){h=a,j.setClearColor(h,i)}});var i=a.backgroundAlpha||1;Object.defineProperty(this,"backgroundAlpha",{get:function(){return i},set:function(a){i=a,j.setClearColor(h,i)}}),this.render=function(){j.render(d.scene,e.Camera)},this.updateDimensions=function(){var a=c.width(),b=c.height();a!==f&&(this.width=a),a!==g&&(this.height=b)};var j=new THREE[b];e.aspectRatio=f/g,j.setSize(f,g),j.setClearColor(h,i),c.html(j.domElement),this.type="Renderer"},threedo.Renderer.prototype=Object.create(threedo.Model.prototype),threedo.Renderer.constructor=threedo.Renderer}(),function(){threedo.Scene=function(a,b){if(threedo.Model.call(this),!a.name)throw"A valid name was not provided to create this scene";var c=a.name;Object.defineProperty(this,"name",{get:function(){return c},set:function(a){c=a}});var d=45;Object.defineProperty(this,"viewAngle",{get:function(){return d},set:function(a){d=a}});var e=.1;Object.defineProperty(this,"near",{get:function(){return e},set:function(a){e=a}});var f=1e3;Object.defineProperty(this,"far",{get:function(){return f},set:function(a){f=a}});var g={};Object.defineProperty(this,"renderer",{get:function(){return g},set:function(a){g=a}});var h=new THREE.Scene;Object.defineProperty(this,"scene",{get:function(){return h},set:function(a){h=a}});var i;Object.defineProperty(this,"backgroundColor",{get:function(){return i},set:function(a){i=a}});var j;Object.defineProperty(this,"backgroundAlpha",{get:function(){return j},set:function(a){j=a}});var k={};Object.defineProperty(this,"skybox",{get:function(){return k},set:function(a){k.materials=[];for(var b=0;b<a.length;++b)k.materials.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(a[b]),side:THREE.BackSide}));k.mesh||(k.mesh=new THREE.Mesh(new THREE.BoxGeometry(f,f,f),new THREE.MeshFaceMaterial(k.materials)),h.add(k.mesh))}});var l=a.$container||threedo.$container;Object.defineProperty(this,"$container",{get:function(){return l},set:function(a){l=a}});var m={};Object.defineProperty(this,"nodes",{get:function(){return m}}),this.add=function(a){if(!m[a.name]){m[a.name]=a;var b=a.Camera||a.Mesh||a.Object3D||a.Light||null;return b&&h.add(b),a}throw'A node already exists in this scene named "'+a.name+'"'},this.find=function(a){return m[a]||null};var n={},o={};this.update=function(){for(var a in n)n.hasOwnProperty(a)&&n[a].active&&n[a].update()},this.update.add=function(a){if(n[a.name])throw'A node named "'+a.name+"\" already exists in this scene's update queue";n[a.name]=a},this.update.remove=function(a){"string"==typeof a&&n[a]?delete n[a]:a instanceof threedo.Node&&n[a.name]&&delete n[a.name]},this.fixedUpdate=function(){g.updateDimensions();for(var a in o)o.hasOwnProperty(a)&&o[a].active&&o[a].fixedUpdate();q=threedo.update.time},this.fixedUpdate.add=function(a){if(o[a.name])throw'A node named "'+a.name+"\" already exists in this scene's update queue";o[a.name]=a},this.fixedUpdate.remove=function(a){"string"==typeof a&&o[a]?delete o[a]:a instanceof threedo.Node&&o[a.name]&&delete o[a.name]};var p=.1,q=-p,r=function(){if(requestAnimationFrame(r),stats.begin(),threedo.update(),threedo.scene){threedo.scene.update();var a=threedo.update.time-q>=p?!0:!1;a&&threedo.scene.fixedUpdate()}g.render(),stats.end()};this.type="Scene";var s=new threedo.Camera({name:"mainCamera",near:e,far:f,scene:this});return g=new threedo.Renderer({camera:s,scene:this}),r(),"function"==typeof b?b():void 0},threedo.Scene.prototype=Object.create(threedo.Model.prototype),threedo.Scene.prototype.constructor=threedo.Scene}(),function(){threedo.Node=function(a){if(threedo.Model.call(this),!a)throw"A valid name was not provided to create this node";this.type="Node";var b=a;Object.defineProperty(this,"name",{get:function(){return b},set:function(a){b=a}});var c=!0;Object.defineProperty(this,"active",{get:function(){return c},set:function(a){c=a}});var d=null;Object.defineProperty(this,"update",{get:function(){return d},set:function(a){if(a){if("function"!=typeof a)throw'The value provided for this node\'s "update" method must be a function';d=a,threedo.scene.update.add(this)}else threedo.scene.update.remove(this),d=null}});var e=null;Object.defineProperty(this,"fixedUpdate",{get:function(){return e},set:function(a){if(a){if("function"!=typeof a)throw'The value provided for this node\'s "fixedUpdate" method must be a function';e=a,threedo.scene.fixedUpdate.add(this)}else threedo.scene.fixedUpdate.remove(this),e=null}})},threedo.Node.prototype=Object.create(threedo.Model.prototype),threedo.Node.prototype.constructor=threedo.Node}(),function(){threedo.UI=function(a){var a=a||{};threedo.Node.call(this,a.name);var b=!1;Object.defineProperty(this,"persist",{get:function(){return b},set:function(a){if("boolean"!=typeof a)throw"This UI object's persist property must be of type boolean";b=a}}),this.persist=a.persist||!1;var c="global";Object.defineProperty(this,"context",{get:function(){return c},set:function(a){c=a&&"global"!==a?a:"global"}}),this.context=a.context||"global";var d=$("<div />").addClass("threedo-UI").attr("data-name",this.name);Object.defineProperty(this,"$",{get:function(){return d}});var e="";Object.defineProperty(this,"class",{get:function(){return e},set:function(a){e=a,this.$.removeClass().addClass("threedo-UI "+(this.typeSpecificClass?this.typeSpecificClass:"")+" "+e)}}),this["class"]=a["class"]||"";var f={top:0,right:null,bottom:null,left:0};Object.defineProperty(this,"position",{get:function(){return f},set:function(a){if("object"!=typeof a)throw"This UI object must be provided a position as an array or object";"[object Array]"===Object.prototype.toString.call(a)?(f.top="number"==typeof a[0]?a[0]:null,f.right="number"==typeof a[1]?a[1]:null,f.bottom="number"==typeof a[2]?a[2]:null,f.left="number"==typeof a[3]?a[3]:null):(f.top="number"==typeof a.top?a.top:null,f.right="number"==typeof a.right?a.right:null,f.bottom="number"==typeof a.bottom?a.bottom:null,f.left="number"==typeof a.left?a.left:null),null===f.top&&null===f.bottom&&(f.top=0),null===f.left&&null===f.right&&(f.left=0),this.position.refresh()}}),this.position.refresh=function(){"number"==typeof f.left?d.css("left",f.left):"number"==typeof f.right&&d.css("left",threedo.scene.renderer.width-f.right),"number"==typeof f.top?d.css("top",f.top):"number"==typeof f.bottom&&d.css("top",threedo.scene.renderer.height-f.bottom)},this.position=a.position||[],threedo.scene.add(this),this.type="UI"},threedo.UI.prototype=Object.create(threedo.Node.prototype),threedo.UI.prototype.constructor=threedo.UI}(),function(){threedo.Node3D=function(a){if(threedo.Node.call(this,a.name),!a.noObject3D){var b;Object.defineProperty(this,"Object3D",{get:function(){return b},set:function(a){b=a}})}Object.defineProperty(this,"position",{get:function(){return b?b.position:this.Mesh?this.Mesh.position:this.Camera?this.Camera.position:void 0},set:function(a){b?b.position.set(a.x,a.y,a.z):this.Mesh?this.Mesh.position.set(a.x,a.y,a.z):this.Camera&&this.Camera.position.set(a.x,a.y,a.z)}}),this.type="Node3D"},threedo.Node3D.prototype=Object.create(threedo.Node.prototype),threedo.Node3D.constructor=threedo.Node3D}(),function(){threedo.Camera=function(a){var a=a||{};a.name=a.name||"mainCamera",a.noObject3D=!0,threedo.Node3D.call(this,a);var b=a.aspectRatio;Object.defineProperty(this,"aspectRatio",{get:function(){return b},set:function(a){b=a,c&&(c.aspect=b,c.updateProjectionMatrix())}});var c=new THREE.PerspectiveCamera(a.viewAngle||45,a.aspectRatio||4/3,a.near||threedo.scene.near,a.far||threedo.scene.far);Object.defineProperty(this,"Camera",{get:function(){return c}}),a.scene?a.scene.add(this):threedo.scene.add(this);var d=a.position||new THREE.Vector3(0,0,0);c.position.set(d.x,d.y,d.z),this.type="Camera"},threedo.Camera.prototype=Object.create(threedo.Node3D.prototype),threedo.Camera.constructor=threedo.Camera}(),function(){threedo.Light=function(a){var a=a||{};a.noObject3D=!0,threedo.Node3D.call(this,a);var b=a.color||16777215,c=new THREE.PointLight(b);Object.defineProperty(this,"Light",{get:function(){return c}});var d=a.position||[0,0,0];c.position.x=d[0],c.position.y=d[1],c.position.z=d[2],threedo.scene.add(this),this.type="Light"},threedo.Light.prototype=Object.create(threedo.Node3D.prototype),threedo.Light.constructor=threedo.Light}(),function(){threedo.Mesh=function(a){var a=a||{};a.noObject3D=!0,threedo.Node3D.call(this,a);var b=null;Object.defineProperty(this,"Mesh",{get:function(){return b},set:function(a){b instanceof THREE.Mesh&&threedo.scene.remove(b),b=a,threedo.scene.add(this)}}),a.Mesh instanceof THREE.Mesh&&(this.Mesh=a.Mesh),a.rotation instanceof THREE.Euler&&(this.Mesh.rotation.x=a.rotation.x,this.Mesh.rotation.y=a.rotation.y,this.Mesh.rotation.z=a.rotation.z),a.position instanceof THREE.Vector3&&(this.Mesh.position.x=a.position.x,this.Mesh.position.y=a.position.y,this.Mesh.position.z=a.position.z),this.type="Mesh"},threedo.Mesh.prototype=Object.create(threedo.Node3D.prototype),threedo.Mesh.constructor=threedo.Mesh}(),function(){threedo.Cube=function(a){var a=a||{},b=a.scale||new THREE.Vector3(1,1,1),c=a.segments||[1,1,1],d=new THREE.BoxGeometry(b.x,b.y,b.z,c[0],c[1],c[2]),e=a.color||16777215,f=a.material||null;f||(f=new THREE.MeshLambertMaterial({color:e})),a.Mesh=new THREE.Mesh(d,f),threedo.Mesh.call(this,a),this.type="Cube"},threedo.Cube.prototype=Object.create(threedo.Mesh.prototype),threedo.Cube.constructor=threedo.Cube}(),function(){threedo.Sphere=function(a){var a=a||{},b=a.radius||1,c=a.segments||[8,6],d=a.phi||[0,2*Math.PI],e=a.theta||[0,Math.PI],f=new THREE.SphereGeometry(b,c[0],c[1],d[0],d[1],e[0],e[1]),g=a.color||16777215,h=a.material||null;h||(h=new THREE.MeshLambertMaterial({color:g})),a.Mesh=new THREE.Mesh(f,h),threedo.Mesh.call(this,a),this.type="Sphere"},threedo.Sphere.prototype=Object.create(threedo.Mesh.prototype),threedo.Sphere.constructor=threedo.Sphere}(),function(){threedo.UI.text=function(a){if(this.typeSpecificClass="threedo-UI-text",threedo.UI.call(this,a),!a.text)throw"A text UI object cannot be created without providing a text value";var b=null;Object.defineProperty(this,"text",{get:function(){return b},set:function(a){b=a,this.$.html("<span>"+b+"</span>")}}),this.text=a.text,this.$.prependTo("global"===this.context?threedo.scene.renderer.$container:this.context),this.type="UI.text"},threedo.UI.text.prototype=Object.create(threedo.UI.prototype),threedo.UI.text.prototype.constructor=threedo.UI.text}(),function(){threedo.UI.select=function(a){var b=this;this.typeSpecificClass="threedo-UI-select",threedo.UI.call(this,a),this.$.hover(function(){b.$.addClass("hover")},function(){b.collapse(),b.$.removeClass("hover")});var c=$("<div />").addClass("options").appendTo(this.$);this.expand=function(){b.$.children(".options").show()},this.collapse=function(){b.$.children(".options").hide()},this.toggle=function(){b.expanded()?b.collapse():b.expand()},this.expanded=function(){return b.$.children(".options").is(":visible")};var d;if(Object.defineProperty(this,"value",{get:function(){return d},set:function(a){if(a!==d){var b;d=a;for(var c in g)g.hasOwnProperty(c)&&"object"==typeof g[c]&&(g[c].$.removeClass("selected"),g[c].selected=!1,g[c].value==d&&(g[c].selected=!0,g[c].$.addClass("selected"),b=g[c]));this.label=b.name,this.collapse(),"function"==typeof this.onChange&&this.onChange(d)}}}),this.on=function(a,c){"change"==a?this.onChange=c:b.$.on(a,c)},this.onChange=null,!a.label)throw"A label is required to create a UI.select object";var e=null,f=null;Object.defineProperty(this,"label",{get:function(){return e},set:function(a){e=a,this.refreshLabel()}}),this.refreshLabel=function(){f?f.children("span").html(b.label):(f=$("<div />").addClass("label").prependTo(b.$),$("<span />").html(b.label).appendTo(f),$("<div />").addClass("arrow-down").prependTo(f),f.on("click",b.toggle))},this.label=a.label;var g=[];if(Object.defineProperty(this,"options",{get:function(){return g}}),this.options.add=function(a){var a=a;if("string"==typeof a)var a={name:a,value:a};a.index=g.length,a.$=$("<div />").html(a.name).attr("data-value",a.value).attr("data-index",a.index).addClass("option").appendTo(c).on("click",function(){b.value=b.options[a.index].value}),g.push(a)},this.options.remove=function(a){return c.children('[data-index="'+a+'"]').remove(),delete g[a],this.options},this.options.clear=function(){return g=[],c.children(".option").remove(),this.options},a.options)for(var h in a.options)a.options.hasOwnProperty(h)&&this.options.add(a.options[h]);this.$.prependTo("global"===this.context?threedo.scene.renderer.$container:this.context),this.type="UI.select"},threedo.UI.select.prototype=Object.create(threedo.UI.prototype),threedo.UI.select.prototype.constructor=threedo.UI.select}();
//# sourceMappingURL=threedo.min.js.map